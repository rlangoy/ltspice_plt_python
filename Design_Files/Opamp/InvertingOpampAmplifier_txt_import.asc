Version 4
SHEET 1 2192 11488
WIRE -512 -48 -512 -80
WIRE 144 32 128 32
WIRE 272 32 224 32
WIRE -512 48 -512 32
WIRE -416 48 -512 48
WIRE -512 64 -512 48
WIRE -416 64 -416 48
WIRE 192 96 176 96
WIRE 176 128 176 96
WIRE 16 144 -64 144
WIRE 128 144 128 32
WIRE 128 144 96 144
WIRE 144 144 128 144
WIRE -64 160 -64 144
WIRE 272 160 272 32
WIRE 272 160 208 160
WIRE 304 160 272 160
WIRE -512 176 -512 144
WIRE 144 176 128 176
WIRE 176 224 176 192
WIRE 192 224 176 224
WIRE -64 272 -64 240
WIRE 128 272 128 176
WIRE 128 272 -64 272
WIRE 352 272 128 272
WIRE 128 304 128 272
FLAG 128 304 0
FLAG 304 160 out
IOPIN 304 160 Out
FLAG 192 96 V+
IOPIN 192 96 In
FLAG 192 224 V-
IOPIN 192 224 In
FLAG -416 64 0
FLAG -512 -80 V+
IOPIN -512 -80 Out
FLAG -512 176 V-
IOPIN -512 176 Out
SYMBOL res 112 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1K
SYMBOL res 240 16 R90
WINDOW 0 -6 55 VBottom 2
WINDOW 3 42 72 VTop 2
SYMATTR InstName R2
SYMATTR Value 1K
SYMBOL voltage -64 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 1 1K)
SYMBOL voltage -512 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -512 -64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL Opamps\\opamp2 176 96 R0
SYMATTR InstName U1
SYMATTR Value OPA314
TEXT -32 368 Left 2 !.tran 10m
TEXT 600 -936 Left 2 !*OPA314 (PSpice format)\n \n\n* OPA314 SIMULATION MODEL\n********************************************\n \n* GREEN-LIS MACROMODEL ARCHITECTURE\n \n********************************************\n**  THIS FILE WAS CREATED BY TINA      **\n**    (C) 1996-2006 DESIGNSOFT, INC.   **\n********************************************\n \n\n* REV A BY MAREK LIS; AUGUST 29, 2011\n*\n*\n* THIS MACROMODEL HAS BEEN OPTIMIZED TO MODEL THE AC, DC, NOISE, AND TRANSIENT RESPONSE PERFORMANCE WITHIN \n* THE DEVICE DATA SHEET SPECIFIED LIMITS. CORRECT OPERATION OF THIS MACROMODEL HAS BEEN VERIFIED ON DESIGNSOFT\n* TINA VERSION 7.0.80.224 SF. FOR HELP WITH OTHER ANALOG SIMULATION SOFTWARE, PLEASE CONSULT THE SOFTWARE SUPPLIER.\n*\n*  \n* COPYRIGHT 2011 BY TEXAS INSTRUMENTS CORPORATION\n \n* BEGIN MODEL OPA314\n \n*GREEN-LIS MACRO-MODEL SIMULATED FEATURES:\n \n*OPEN LOOP GAIN AND PHASE VS FREQUENCY WITH RL AND CL EFFECTS\n*INPUT COMMON MODE REJECTION WITH FREQUENCY\n*POWER SUPPLY REJECTION WITH FREQUENCY\n*INPUT IMPEDANCE VS FREQUENCY \n*OUTPUT IMPEDANCE VS OUTPUT CURRENT\n*INPUT VOLTAGE NOISE VS FREQUENCY\n*INPUT CURRENT NOISE VS FREQUENCY \n*OUTPUT VOLTAGE SWING VS OUTPUT CURRENT\n*SHORT-CIRCUIT OUTPUT CURRENT\n*QUIESCENT CURRENT VS SUPPLY VOLTAGE\n*SETTLING TIME VS CAPACITIVE LOAD\n*SLEW RATE\n*SMALL SIGNAL OVERSHOOT VS CAPACITIVE LOAD\n*LARGE SIGNAL RESPONSE\n*OVERLOAD RECOVERY TIME\n*INPUT BIAS CURRENT\n*INPUT VOLTAGE OFFSET\n*INPUT COMMON MODE RANGE\n*OUTPUT CURRENT COMING THROUGH THE SUPPLY RAILS\n \n* PIN ORDER: +IN, -IN, V+, V-, OUT\n.SUBCKT OPA314  1 2 3 4 5\nV7          48 10 0\nVOS         26 39 -375.1U\nV11         52 53 100M\nV10         54 55 100M\nV6          9 60 10\nV5          61 9 10\nV4          57 59 7.8\nV1          58 56 7.8\nV9          72 11 0\nIS2         3 26 400F\nIS1         3 4 150U\nIS3         44 4 -200F\nV3          76 9 20\nV2          9 77 20\nR3          27 28 1MEG \nL4          9 28 17M IC=0 \nXU15        12 9 29 30 VC_RES_0\nL1          31 9 1F IC=0 \nR2          31 32 1 \nGVCCS8      9 32 9 33  1\nXR109       34 9 RNOISE_FREE_0\nC3          34 9 12F \nGVCCS4      9 34 23 9  1U\nC2          35 9 5F \nXR109_2     35 9 RNOISE_FREE_1\nGVCCS3      9 35 34 9  1M\nR4          36 20 10M \nC7          37 38 1P \nC8          38 9 5P\nCINNCM      9 37 5P \nXIN11       39 37 FEMT_0\nL2          40 9 1F \nXR109_3     23 9 RNOISE_FREE_0\nXR109_4     41 9 RNOISE_FREE_0\nXVN11       38 39 VNSE_0\nXU14        42 9 43 44 VCVS_LIMIT_0\nL3          45 9 3.16M \nR1          40 42 1 \nGVCCS2      9 42 9 46  1\nXU13        10 47 IDEAL_D_0\nEVCVS5      48 9 4 9  1\nC11         41 9 12F\nXR109_5     22 9 RNOISE_FREE_1\nGVCCS12     9 23 41 9  1U\nXU5         12 9 3 13 VCVS_LIMIT_1\nXU6         9 12 14 4 VCVS_LIMIT_2\nC15         3 4 10P IC=0 \nC22         9 19 1P \nR29         19 21 1 \nC23         9 24 1P IC=0 \nC9          49 9 10P IC=0 \nR26         49 12 10 \nC21         9 15 1P IC=0 \nC20         9 16 1P IC=0 \nC19         17 9 1P IC=0 \nC17         18 9 1P IC=0 \nC16         9 50 1P IC=0 \nC12         51 9 1P IC=0 \nR13         30 24 1 \nR36         24 55 1M \nR35         24 53 1M \nSW12        56 52 17 9  S_VSWITCH_1\nSW11        54 57 9 18  S_VSWITCH_2\nR34         24 58 1K \nR33         24 59 1K \nSW10        61 21 19 9  S_VSWITCH_3\nSW9         21 60 9 19  S_VSWITCH_4\nR25         62 17 1 \nR19         63 18 1 \nR16         64 50 1 \nR14         65 51 1 \nR12         66 15 1 \nR7          67 16 1 \nR5          68 22 10M \nR6          69 21 10M \nR15         0 9 100MEG \nC13         22 9 5F \nGVCCS1      9 22 35 9  1M\nGISINKING   4 9 70 9  1M\nGISOURCING  3 9 71 9  1M\nR23         70 9 10K \nSW7         12 70 49 9  S_VSWITCH_5\nR21         9 71 10K \nSW8         12 71 49 9  S_VSWITCH_6\nSW4         69 66 15 9  S_VSWITCH_7\nSW3         67 69 9 16  S_VSWITCH_8\nXU3         57 25 67 9 VCVS_LIMIT_3\nXU1         56 25 66 9 VCVS_LIMIT_3\nSW2         36 62 17 9  S_VSWITCH_9\nSW1         63 36 9 18  S_VSWITCH_10\nXU8         26 3 IDEAL_D_1\nXU12        4 26 IDEAL_D_1\nEVCVS6      72 9 3 9  1\nR22         73 47 100 \nEVCVS4      73 9 26 9  1\nXU2         47 11 IDEAL_D_0\nSW6         68 64 50 9  S_VSWITCH_11\nSW5         65 68 9 51  S_VSWITCH_12\nXU26        47 44 9 74 VCCS_LIMIT_0\nXU4         74 9 9 21 VCCS_LIMIT_1\nLPSR        75 9 1M IC=0 \nXVCVSPSRR   32 9 43 37 VCVS_LIMIT_4\nXU22        76 12 63 9 VCVS_LIMIT_5\nXU21        77 12 62 9 VCVS_LIMIT_5\nXU20        14 5 64 9 VCVS_LIMIT_5\nXU19        13 5 65 9 VCVS_LIMIT_6\nXU11        4 44 IDEAL_D_1\nXU10        44 3 IDEAL_D_1\nC10         20 9 5F \nC5          23 9 12F \nXR109_6     20 9 RNOISE_FREE_1\nGVCCS15     9 20 22 9  1M\nGVCCS10     9 41 27 9  1U\nR20         1 38 100 \nR18         2 37 100 \nGVCCS6      9 27 25 9  1U\nXR102       78 79 RNOISE_FREE_0\nXR101       80 78 RNOISE_FREE_0\nC6          78 0 1 IC=0 \nXR105       25 9 RNOISE_FREE_0\nXR104       21 9 RNOISE_FREE_2\nXR103       9 74 RNOISE_FREE_0\nEVCVS34     9 0 78 0  1\nRPSR        75 33 1 \nGVCCS11     9 33 3 4  25U\nRCM         45 46 1 \nEVCVS29     80 0 3 0  1\nEVCVS28     79 0 4 0  1\nGVCCS7      9 46 26 9  15U\nVCCVS1_IN   29 5\nHCCVS1      12 9 VCCVS1_IN   1K\nGVCCS5      9 25 21 9  1U\nCCC         21 9 16U \nEVCVS3      30 9 20 9  1\n.MODEL S_VSWITCH_1 VSWITCH (RON=1 ROFF=10MEG VON=100M VOFF=-100M)\n.MODEL S_VSWITCH_2 VSWITCH (RON=1 ROFF=10MEG VON=100M VOFF=-100M)\n.MODEL S_VSWITCH_3 VSWITCH (RON=10M ROFF=100MEG VON=150 VOFF=130)\n.MODEL S_VSWITCH_4 VSWITCH (RON=10M ROFF=100MEG VON=150 VOFF=130)\n.MODEL S_VSWITCH_5 VSWITCH (RON=1M ROFF=10MEG VON=-10M VOFF=0)\n.MODEL S_VSWITCH_6 VSWITCH (RON=1M ROFF=10MEG VON=10M VOFF=0)\n.MODEL S_VSWITCH_7 VSWITCH (RON=1 ROFF=10MEG VON=1 VOFF=-1)\n.MODEL S_VSWITCH_8 VSWITCH (RON=1 ROFF=10MEG VON=1 VOFF=-1)\n.MODEL S_VSWITCH_9 VSWITCH (RON=1 ROFF=1G VON=10 VOFF=-10)\n.MODEL S_VSWITCH_10 VSWITCH (RON=1 ROFF=1G VON=10 VOFF=-10)\n.MODEL S_VSWITCH_11 VSWITCH (RON=1 ROFF=1G VON=10 VOFF=-10)\n.MODEL S_VSWITCH_12 VSWITCH (RON=1 ROFF=1G VON=10 VOFF=-10)\n.ENDS\n \n\n*VOLTAGE CONTROLLED RESISTOR\n.SUBCKT VC_RES_0  1      2      3    4\n*              VC+    VC-   RES1 RES2\n*ERES 3 40 VALUE = {600*(I(VSENSE) /(1+ABS(V(1,2)))*0.075)}\nERES 3 40 VALUE = {600*(I(VSENSE) / SQRT(((ABS(V(1,2))/0.075)+1)/1))}\nVSENSE 40 4 DC 0\n.ENDS VC_RES_0 \n \n\n* NOISELESS RESISTOR\n.SUBCKT RNOISE_FREE_0  1 2\n*ROHMS = VALUE IN OHMS OF NOISELESS RESISTOR\n.PARAM ROHMS=1E6\nERES 1 3 VALUE = { I(VSENSE) * ROHMS }\nRDUMMY 30 3 1\nVSENSE 30 2 DC 0V\n.ENDS RNOISE_FREE_0 \n \n\n* NOISELESS RESISTOR\n.SUBCKT RNOISE_FREE_1  1 2\n*ROHMS = VALUE IN OHMS OF NOISELESS RESISTOR\n.PARAM ROHMS=1E3\nERES 1 3 VALUE = { I(VSENSE) * ROHMS }\nRDUMMY 30 3 1\nVSENSE 30 2 DC 0V\n.ENDS RNOISE_FREE_1 \n \n\n* BEGIN PROG NSE FEMTO AMP/RT-HZ \n.SUBCKT FEMT_0  1 2\n* BEGIN SETUP OF NOISE GEN - FEMPTOAMPS/RT-HZ\n* INPUT THREE VARIABLES\n* SET UP INSE 1/F\n* FA/RHZ AT 1/F FREQ\n.PARAM NLFF=5\n* FREQ FOR 1/F VAL\n.PARAM FLWF=0.001\n* SET UP INSE FB\n* FA/RHZ FLATBAND\n.PARAM NVRF=5\n* END USER INPUT\n* START CALC VALS\n.PARAM GLFF={PWR(FLWF,0.25)*NLFF/1164}\n.PARAM RNVF={1.184*PWR(NVRF,2)}\n.MODEL DVNF D KF={PWR(FLWF,0.5)/1E11} IS=1.0E-16\n* END CALC VALS\nI1 0 7 10E-3\nI2 0 8 10E-3\nD1 7 0 DVNF\nD2 8 0 DVNF\nE1 3 6 7 8 {GLFF}\nR1 3 0 1E9\nR2 3 0 1E9\nR3 3 6 1E9\nE2 6 4 5 0 10\nR4 5 0 {RNVF}\nR5 5 0 {RNVF}\nR6 3 4 1E9\nR7 4 0 1E9\nG1 1 2 3 4 1E-6\nC1 1 0 1E-15\nC2 2 0 1E-15\nC3 1 2 1E-15\n.ENDS\n* END PROG NSE FEMTO AMP/RT-HZ\n \n\n* BEGIN PROG NSE NANO VOLT/RT-HZ\n.SUBCKT VNSE_0  1 2\n* BEGIN SETUP OF NOISE GEN - NANOVOLT/RT-HZ\n* INPUT THREE VARIABLES\n* SET UP VNSE 1/F\n* NV/RHZ AT 1/F FREQ\n.PARAM NLF=150\n* FREQ FOR 1/F VAL\n.PARAM FLW=1\n* SET UP VNSE FB\n* NV/RHZ FLATBAND\n.PARAM NVR=13\n* END USER INPUT\n* START CALC VALS\n.PARAM GLF={PWR(FLW,0.25)*NLF/1164}\n.PARAM RNV={1.184*PWR(NVR,2)}\n.MODEL DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16\n* END CALC VALS\nI1 0 7 10E-3\nI2 0 8 10E-3\nD1 7 0 DVN\nD2 8 0 DVN\nE1 3 6 7 8 {GLF}\nR1 3 0 1E9\nR2 3 0 1E9\nR3 3 6 1E9\nE2 6 4 5 0 10\nR4 5 0 {RNV}\nR5 5 0 {RNV}\nR6 3 4 1E9\nR7 4 0 1E9\nE3 1 2 3 4 1\nC1 1 0 1E-15\nC2 2 0 1E-15\nC3 1 2 1E-15\n.ENDS\n* END PROG NSE NANOV/RT-HZ\n \n\n*VOLTAGE CONTROLLED SOURCE WITH LIMITS\n.SUBCKT VCVS_LIMIT_0  VC+ VC- VOUT+ VOUT-\n*              \n.PARAM GAIN = 1\n.PARAM VPOS = 10M\n.PARAM VNEG = -10M\nE1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VNEG,VPOS)}\n.ENDS VCVS_LIMIT_0 \n \n\n*TG IDEAL DIODE\n.SUBCKT IDEAL_D_0  A C\nD1 A C DNOM\n.MODEL DNOM D (TT=10P CJO=1E-18 IS=1E-15 RS=1E-3)\n.ENDS IDEAL_D_0 \n \n\n*VOLTAGE CONTROLLED SOURCE WITH LIMITS\n.SUBCKT VCVS_LIMIT_1  VC+ VC- VOUT+ VOUT-\n*              \n \nE1 VOUT+ VOUT- TABLE {ABS(V(VC+,VC-))} = (0,0.029) (0.25,0.029) (19.9,0.6) \n.ENDS VCVS_LIMIT_1 \n \n\n \n*VOLTAGE CONTROLLED SOURCE WITH LIMITS\n.SUBCKT VCVS_LIMIT_2  VC+ VC- VOUT+ VOUT-\n*              \n \nE1 VOUT+ VOUT- TABLE {ABS(V(VC+,VC-))} = (0,0.029) (0.25,0.029) (19.9,0.6)\n.ENDS VCVS_LIMIT_2 \n \n\n \n*VOLTAGE CONTROLLED SOURCE WITH LIMITS\n.SUBCKT VCVS_LIMIT_3  VC+ VC- VOUT+ VOUT-\n*              \n.PARAM GAIN = 100\n.PARAM VPOS = 6000\n.PARAM VNEG = -6000\nE1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VNEG,VPOS)}\n.ENDS VCVS_LIMIT_3 \n \n\n*TG IDEAL DIODE\n.SUBCKT IDEAL_D_1  A C\nD1 A C DNOM \n.MODEL DNOM D (TT=10P CJO=1E-18 IS=1E-15 RS=1E-3)\n.ENDS IDEAL_D_1 \n \n\n*VOLTAGE CONTROLLED SOURCE WITH LIMITS\n.SUBCKT VCCS_LIMIT_0  VC+ VC- IOUT+ IOUT-\n*              \n.PARAM GAIN = 100U\n.PARAM IPOS = .5\n.PARAM INEG = -.5\nG1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}\n.ENDS VCCS_LIMIT_0 \n \n\n*VOLTAGE CONTROLLED SOURCE WITH LIMITS\n.SUBCKT VCCS_LIMIT_1  VC+ VC- IOUT+ IOUT-\n*              \n.PARAM GAIN = 3.25\n.PARAM IPOS = 24\n.PARAM INEG = -24\nG1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}\n.ENDS VCCS_LIMIT_1 \n \n\n*VOLTAGE CONTROLLED SOURCE WITH LIMITS\n.SUBCKT VCVS_LIMIT_4  VC+ VC- VOUT+ VOUT-\n*              \n.PARAM GAIN = -1\n.PARAM VPOS = 10M\n.PARAM VNEG = -10M\nE1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VNEG,VPOS)}\n.ENDS VCVS_LIMIT_4 \n \n\n*VOLTAGE CONTROLLED SOURCE WITH LIMITS\n.SUBCKT VCVS_LIMIT_5  VC+ VC- VOUT+ VOUT-\n*              \n.PARAM GAIN = 100\n.PARAM VPOS = 5000\n.PARAM VNEG = -5000\nE1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VNEG,VPOS)}\n.ENDS VCVS_LIMIT_5 \n \n\n*VOLTAGE CONTROLLED SOURCE WITH LIMITS\n.SUBCKT VCVS_LIMIT_6  VC+ VC- VOUT+ VOUT-\n*             \n.PARAM GAIN = 100\n.PARAM VPOS = 5000\n.PARAM VNEG = -5000\nE1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VNEG,VPOS)}\n.ENDS VCVS_LIMIT_6 \n \n\n* NOISELESS RESISTOR\n.SUBCKT RNOISE_FREE_2  1 2\n*ROHMS = VALUE IN OHMS OF NOISELESS RESISTOR\n.PARAM ROHMS=3.16E3\nERES 1 3 VALUE = { I(VSENSE) * ROHMS }\nRDUMMY 30 3 1\nVSENSE 30 2 DC 0V\n.ENDS RNOISE_FREE_2 \n \n\n.END\n \n\n.END
TEXT -704 -568 Left 2 ;1: Fra komponent menyen veg  Opamps\\opamp2\n2: Høyreklik og endre navnet fra "Opamp2" til OPA314\n3: Trykk på .op og lim inn teksen fra filen OPA314.CIR\n4: Kjør Simuleringen
